# ูุธุงู ูุญุต ุตุญุฉ Backend ุงููุชูุฏู - Advanced Multi-Server Health Check System

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุงุญุชุฑุงูู ููุชูุฏู ููุญุต ุตุญุฉ ุงูู backend ูุฏุนู ุฎูุงุฏู ูุชุนุฏุฏุฉ ูุน ุขููุฉ ุชุจุฏูู ุชููุงุฆู. ูุถูู ุงููุธุงู ุนูู ุงููุธุงู ุจุดูู ุตุญูุญ ูุจู ุนุฑุถ ุงููุญุชูู ูููุณุชุฎุฏููู ูุน ุฏุนู ุฎูุงุฏู ุงุญุชูุงุทูุฉ ูุถูุงู ุงูุงุณุชูุฑุงุฑูุฉ.

## ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### ๐ ูุญุต ุดุงูู ููุตุญุฉ
- ูุญุต ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงุฎุชุจุงุฑ ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ
- ูุญุต ุฎุฏูุงุช ุงููุตุงุฏูุฉ
- ูุนูููุงุช ููุตูุฉ ุนู ุญุงูุฉ ุงููุธุงู

### ๐ ุฏุนู ุฎูุงุฏู ูุชุนุฏุฏุฉ
- ูุญุต ูุชุฒุงูู ูุฎูุงุฏู ูุชุนุฏุฏุฉ
- ุฎุงุฏู ูุญูู: `http://localhost:8000`
- ุฎุงุฏู ุณุญุงุจู: `https://aziton-abo-nageb-backend.onrender.com`
- ุชุจุฏูู ุชููุงุฆู ููุฎุงุฏู ุงูุฃูุถู
- ุฃููููุฉ ููุฎุงุฏู ุงููุญูู ุนูุฏ ุชูุงูุฑู

### ๐จ ูุงุฌูุฉ ูุณุชุฎุฏู ุงุญุชุฑุงููุฉ
- ุดุงุดุฉ ุชุญููู ุชูุงุนููุฉ ูุน ุฑุณุงุฆู ูุชุญุฑูุฉ
- ูุคุดุฑุงุช ุญุงูุฉ ุจุตุฑูุฉ (ุฃุฎุถุฑ/ุฃุญูุฑ/ุฃุฒุฑู)
- ููุญุฉ ุญุงูุฉ ุงูุฎูุงุฏู ูู ุตูุญุฉ ุงูุฅุญุตุงุฆูุงุช
- ุชูุจููุงุช ุนูุฏ ูุฌูุฏ ูุดุงูู
- ุชุตููู ูุชุฌุงูุจ ููุฌูุงู ูุงูููุจููุชุฑ

### โก ุฃุฏุงุก ูุญุณู
- ูุญุต ุณุฑูุน ููุตูุญุฉ ุงูุฃููู (3 ุซูุงู)
- ูุญุต ุดุงูู ูุน ุฅุนุงุฏุฉ ุงููุญุงููุฉ (10 ุซูุงู)
- ูุญุต ุฏูุฑู ูู 30 ุซุงููุฉ
- ุชุฎุฒูู ูุคูุช ููุญุงูุฉ
- ูุญุต ูุชูุงุฒู ููุฎูุงุฏู ุงููุชุนุฏุฏุฉ

### ๐ ูุฑุงูุจุฉ ูุณุชูุฑุฉ
- ูุญุต ุชููุงุฆู ุนูุฏ ุงูุนูุฏุฉ ููุชุจููุจ
- ูุญุต ุนูุฏ ุงูุงุชุตุงู/ุงููุทุงุน ุงูุฅูุชุฑูุช
- ุฅุนุงุฏุฉ ูุญุงููุฉ ุฐููุฉ ูุน ุชุฃุฎูุฑ ูุชุฒุงูุฏ
- ุชุจุฏูู ุชููุงุฆู ุนูุฏ ูุดู ุฎุงุฏู

## ุงููููุงุช ุงููุถุงูุฉ

### Backend
- **`backend/api/views.py`**: ุชู ุชุญุณูู endpoint `/api/health/` ููุญุต ุดุงูู

### Frontend
- **`frontend/lib/healthService.ts`**: ุฎุฏูุฉ ูุญุต ุงูุตุญุฉ ุงููุชูุฏูุฉ ูุน ุฏุนู ุฎูุงุฏู ูุชุนุฏุฏุฉ
- **`frontend/app/components/HealthLoadingScreen.tsx`**: ุดุงุดุฉ ุงูุชุญููู ุงูุงุญุชุฑุงููุฉ ูุน ูุนูููุงุช ุงูุฎูุงุฏู
- **`frontend/app/contexts/HealthContext.tsx`**: Context ูุฅุฏุงุฑุฉ ุญุงูุฉ ุงููุธุงู ูุงูุฎูุงุฏู ุงููุชุนุฏุฏุฉ
- **`frontend/app/layout.tsx`**: ุฏูุฌ HealthProvider ูู ุงูุชุทุจูู ุงูุฑุฆูุณู
- **`frontend/app/(dashboard)/layout.tsx`**: ุฅุถุงูุฉ ูุคุดุฑุงุช ุงูุญุงูุฉ ูููุญุฉ ุงูุชุญูู
- **`frontend/app/(dashboard)/statistics/page.tsx`**: ุฅุถุงูุฉ ููุญุฉ ุญุงูุฉ ุงูุฎูุงุฏู
- **`frontend/app/page.tsx`**: ุฅุถุงูุฉ ูุคุดุฑ ุงูุญุงูุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ

## ููููุฉ ุงูุนูู

### 1. ุนูุฏ ูุชุญ ุงูุชุทุจูู
```typescript
// ูุชู ุนุฑุถ ุดุงุดุฉ ุงูุชุญููู
<HealthLoadingScreen onHealthCheckComplete={handleComplete} />

// ูุญุต ุณุฑูุน ูุฌููุน ุงูุฎูุงุฏู
const healthStatus = await healthService.quickCheck();

// ุงููุธุงู ููุญุต:
// 1. ุงูุฎุงุฏู ุงููุญูู (localhost:8000)
// 2. ุงูุฎุงุฏู ุงูุณุญุงุจู (render.com)
// 3. ูุฎุชุงุฑ ุงูุฃุณุฑุน ูุงูุฃูุซุฑ ุงุณุชูุฑุงุฑุงู
```

### 2. ุฃุซูุงุก ุงูุงุณุชุฎุฏุงู
```typescript
// ูุญุต ุฏูุฑู ูู 30 ุซุงููุฉ ูุฌููุน ุงูุฎูุงุฏู
useEffect(() => {
  const interval = setInterval(() => {
    checkHealth(); // ููุญุต ุฌููุน ุงูุฎูุงุฏู ููุฎุชุงุฑ ุงูุฃูุถู
  }, 30000);
  
  return () => clearInterval(interval);
}, []);

// ูู ุญุงูุฉ ูุดู ุฎุงุฏูุ ูุชู ุงูุชุจุฏูู ุชููุงุฆูุงู ููุฎุงุฏู ุงูุงุญุชูุงุทู
```

### 3. ุนูุฏ ูุฌูุฏ ูุดุงูู
```typescript
// ุนุฑุถ ุชูุจูู ุฃุญูุฑ ูุน ูุนูููุงุช ุงูุฎูุงุฏู
{hasError && (
  <div className="bg-red-50 border-b border-red-200">
    <p>ุชุญุฐูุฑ: ูุดููุฉ ูู ุงูุงุชุตุงู ุจุงูุฎูุงุฏู</p>
    <button onClick={checkHealth}>ุฅุนุงุฏุฉ ูุญุต ุฌููุน ุงูุฎูุงุฏู</button>
  </div>
)}

// ุนุฑุถ ููุญุฉ ุญุงูุฉ ุงูุฎูุงุฏู
<ServerStatusPanel />
```

## API Response

### ุนูุฏ ูุฌุงุญ ุงููุญุต
```json
{
  "status": "healthy",
  "timestamp": "2025-01-15T10:30:00Z",
  "database": "connected",
  "services": {
    "database": true,
    "api": true,
    "authentication": true
  },
  "version": "1.0.0",
  "environment": "production"
}
```

### ุนูุฏ ูุดู ุงููุญุต
```json
{
  "status": "unhealthy",
  "timestamp": "2025-01-15T10:30:00Z",
  "error": "Database connection failed",
  "services": {
    "database": false,
    "api": true,
    "authentication": false
  }
}
```

## ุฅุฏุงุฑุฉ ุงูุฎูุงุฏู ุงููุชุนุฏุฏุฉ

### ุฅุถุงูุฉ ุฎุงุฏู ุฌุฏูุฏ
```typescript
const healthService = new HealthService({
  servers: [
    'http://localhost:8000',
    'https://aziton-abo-nageb-backend.onrender.com',
    'https://your-new-server.com' // ุฎุงุฏู ุฌุฏูุฏ
  ]
});
```

### ุชุจุฏูู ุงูุฎุงุฏู ูุฏููุงู
```typescript
const { switchToServer, availableServers } = useHealth();

// ุชุจุฏูู ุฅูู ุฎุงุฏู ูุญุฏุฏ
const success = await switchToServer('https://aziton-abo-nageb-backend.onrender.com');

// ุนุฑุถ ุงูุฎูุงุฏู ุงููุชุงุญุฉ
console.log('Available servers:', availableServers);
```

### ุฃููููุฉ ุงูุฎูุงุฏู
```typescript
// ุงููุธุงู ูุฎุชุงุฑ ุงูุฎุงุฏู ุญุณุจ ุงูุฃููููุฉ:
// 1. ุงูุฎูุงุฏู ุงููุดุทุฉ (isActive: true)
// 2. ุฃูู ููุช ุงุณุชุฌุงุจุฉ
// 3. ุงูุฎุงุฏู ุงููุญูู ูู ุฃููููุฉ ุฃุนูู
```

## ุงูุชุฎุตูุต

### ุชุบููุฑ ูุชุฑุงุช ุงููุญุต
```typescript
<HealthProvider 
  enablePeriodicChecks={true} 
  checkInterval={60000} // 60 ุซุงููุฉ
  showLoadingScreen={true}
>
```

### ุชุฎุตูุต ุดุงุดุฉ ุงูุชุญููู
```typescript
<HealthLoadingScreen 
  onHealthCheckComplete={handleComplete}
  showDetailedStatus={true}
/>
```

### ุงุณุชุฎุฏุงู ูุคุดุฑ ุงูุญุงูุฉ
```typescript
import { HealthStatusIndicator, ServerStatusPanel } from '@/app/contexts/HealthContext';

// ูุคุดุฑ ุจุณูุท
<HealthStatusIndicator showText={false} />

// ูุคุดุฑ ูุน ูุต
<HealthStatusIndicator showText={true} />

// ูุคุดุฑ ูุน ูุนูููุงุช ุงูุฎุงุฏู
<HealthStatusIndicator showText={true} showServerInfo={true} />

// ููุญุฉ ุญุงูุฉ ุงูุฎูุงุฏู ุงููุงููุฉ
<ServerStatusPanel />
```

## ุงูุงุณุชุฎุฏุงู ูู ุงูููููุงุช

### ูุญุต ุงูุญุงูุฉ ูุฏููุงู
```typescript
import { useHealth } from '@/app/contexts/HealthContext';

function MyComponent() {
  const { 
    healthStatus, 
    isChecking, 
    checkHealth, 
    activeServer, 
    availableServers 
  } = useHealth();
  
  if (healthStatus?.status === 'unhealthy') {
    return (
      <div>
        <p>ุฌููุน ุงูุฎูุงุฏู ุบูุฑ ูุชุงุญุฉ ุญุงููุงู</p>
        <button onClick={checkHealth}>ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
      </div>
    );
  }
  
  return (
    <div>
      <p>ุงููุญุชูู ุงูุนุงุฏู</p>
      <p>ุงูุฎุงุฏู ุงููุดุท: {activeServer}</p>
      <p>ุงูุฎูุงุฏู ุงููุชุงุญุฉ: {availableServers.length}</p>
    </div>
  );
}
```

### ุงูุงุณุชุฌุงุจุฉ ูุชุบููุฑ ุงูุญุงูุฉ
```typescript
useEffect(() => {
  if (healthStatus?.status === 'unhealthy') {
    // ุฅุธูุงุฑ ุชูุจูู ุฃู ุชุนุทูู ููุฒุงุช ูุนููุฉ
    showNotification('ูุดููุฉ ูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู');
  }
}, [healthStatus]);
```

## ุงูุฃูุงู ูุงูุฃุฏุงุก

### ุงูุฃูุงู
- ูุญุต ุงูุตุญุฉ ูุง ูุชุทูุจ ูุตุงุฏูุฉ (AllowAny)
- ูุง ูุชู ูุดู ูุนูููุงุช ุญุณุงุณุฉ ูู ุงูุงุณุชุฌุงุจุฉ
- ุญูุงูุฉ ูู ูุฌูุงุช DoS ูุน timeout

### ุงูุฃุฏุงุก
- ูุญุต ุณุฑูุน ููุตูุญุฉ ุงูุฃููู (3 ุซูุงู)
- ุชุฎุฒูู ูุคูุช ููุญุงูุฉ ูุชุฌูุจ ุงููุญูุตุงุช ุงููุชูุฑุฑุฉ
- ูุญุต ุฏูุฑู ููุท ุนูุฏ ุงูุญุงุฌุฉ

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ

1. **ุดุงุดุฉ ุงูุชุญููู ูุง ุชุฎุชูู**
   - ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
   - ุชุญูู ูู ุฃู ุงูู backend ูุนูู
   - ุชุญูู ูู URL ูู `NEXT_PUBLIC_API_URL`

2. **ูุคุดุฑ ุงูุญุงูุฉ ูุธูุฑ ุฏุงุฆูุงู ุฃุญูุฑ**
   - ุชุญูู ูู endpoint `/api/health/`
   - ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุชุญูู ูู ุฅุนุฏุงุฏุงุช CORS

3. **ูุญุต ุฏูุฑู ูุง ูุนูู**
   - ุชุฃูุฏ ูู ุชูุนูู `enablePeriodicChecks`
   - ุชุญูู ูู ูููุฉ `checkInterval`

### ุณุฌูุงุช ุงูุชุทููุฑ
```typescript
// ุชูุนูู ุงูุณุฌูุงุช ูู ูุถุน ุงูุชุทููุฑ
console.log('Health Status:', healthStatus);
console.log('Is Checking:', isChecking);
console.log('Has Error:', hasError);
```

## ุงูุชุญุฏูุซุงุช ุงูุฃุฎูุฑุฉ (v2.0)

### โ ุชู ุฅูุฌุงุฒู
- [x] ุฏุนู ุฎูุงุฏู ูุชุนุฏุฏุฉ ูุน ูุญุต ูุชุฒุงูู
- [x] ุขููุฉ ุชุจุฏูู ุชููุงุฆู ููุฎูุงุฏู
- [x] ุฃููููุฉ ููุฎุงุฏู ุงููุญูู ุนูุฏ ุชูุงูุฑู
- [x] ููุญุฉ ุญุงูุฉ ุงูุฎูุงุฏู ูู ุตูุญุฉ ุงูุฅุญุตุงุฆูุงุช
- [x] ูุคุดุฑุงุช ุญุงูุฉ ูุญุณูุฉ ูุน ูุนูููุงุช ุงูุฎูุงุฏู
- [x] ูุญุต ูุชูุงุฒู ูุชุญุณูู ุงูุฃุฏุงุก
- [x] ุฏุนู ุฎุงุฏู Render.com ูุฎุงุฏู ุงุญุชูุงุทู

## ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### ููุฒุงุช ูุฎุทุทุฉ
- [ ] ุฅุดุนุงุฑุงุช push ุนูุฏ ูุฌูุฏ ูุดุงูู
- [ ] ุฅุญุตุงุฆูุงุช ููุตูุฉ ุนู ุฃููุงุช ุงูุงุณุชุฌุงุจุฉ
- [ ] ุฏุนู ููุญุต ุฎุฏูุงุช ุฎุงุฑุฌูุฉ
- [ ] ููุญุฉ ุชุญูู ูููุฑุงูุจุฉ
- [ ] ุฏุนู ุฎูุงุฏู ุฅุถุงููุฉ (AWS, DigitalOcean)
- [ ] ููุงุฒูุฉ ุงูุชุญููู ุงูุฐููุฉ

### ุชุญุณููุงุช ุงูุฃุฏุงุก
- [x] ูุญุต ูุชูุงุฒู ูุฎุฏูุงุช ูุชุนุฏุฏุฉ
- [ ] ุชุญุณูู ุฎูุงุฑุฒููุฉ ุฅุนุงุฏุฉ ุงููุญุงููุฉ
- [ ] ุถุบุท ุงุณุชุฌุงุจุงุช API
- [ ] ุชุฎุฒูู ูุคูุช ููุงุณุชุฌุงุจุงุช

---

## ุงูุฏุนู

ููุญุตูู ุนูู ุงููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงููุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

**ุชู ุงูุชุทููุฑ ุจู โค๏ธ ูุถูุงู ุฃูุถู ุชุฌุฑุจุฉ ูุณุชุฎุฏู**
