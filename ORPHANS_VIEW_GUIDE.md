# دليل عرض بيانات الأيتام والأوصياء

## نظرة عامة

تم تطوير صفحة عرض بيانات الأيتام لتدعم طريقتين احترافيتين للعرض:

### 1. العرض حسب اليتيم
- عرض جميع الأيتام في جدول منظم
- إمكانية البحث بالاسم أو رقم الهوية
- فلترة حسب الجنس والمحافظة
- عرض معلومات اليتيم والوصي
- إمكانية فتح تفاصيل كاملة لكل يتيم

### 2. العرض حسب الوصي (الجديد)
- عرض جميع الأوصياء مع عدد الأيتام لكل وصي
- عند الضغط على الوصي، يظهر جدول بأسماء وبيانات الأيتام المرفقين به
- عرض معلومات الوصي الأساسية في رأس القسم القابل للتوسيع
- جدول داخلي احترافي لعرض بيانات الأيتام (الاسم، الجنس، العمر، المستوى التعليمي، إلخ)

## المميزات الجديدة

### 1. نظام Tabs
- تبديل سهل بين طريقتي العرض
- واجهة نظيفة وواضحة

### 2. الجداول القابلة للتوسيع
- عرض الأوصياء في بطاقات قابلة للنقر
- عند الضغط على الوصي، يتوسع القسم لإظهار جدول الأيتام
- يمكن فتح عدة أوصياء في نفس الوقت

### 3. معلومات الوصي
عند توسيع بطاقة الوصي، يتم عرض:
- رقم الهوية
- صلة القرابة
- المحافظة
- الرقم التسلسلي
- تاريخ الاستشهاد
- رقم الحساب البنكي

### 4. جدول الأيتام الداخلي
يحتوي على:
- اسم اليتيم (مع أيقونة)
- رقم الهوية
- الجنس (مع ألوان مميزة)
- العمر
- المستوى التعليمي
- الحالة الصحية
- المحافظة

### 5. الإحصائيات
- في وضع عرض الأيتام: إجمالي الأيتام، الذكور، الإناث، الملتحقين بالتعليم
- في وضع عرض الأوصياء: إجمالي الأوصياء، إجمالي الأيتام، متوسط الأيتام لكل وصي

## التحديثات التقنية

### Backend
1. إضافة `GuardianViewSet` جديد في `views.py`
2. إضافة route `/api/guardians/` في `urls.py`
3. إضافة `OrphanSimpleSerializer` لتجنب circular references
4. دعم البحث والفلترة في الأوصياء

### Frontend
1. تحديث `api.ts` لإضافة `guardianAPI`
2. إضافة interfaces جديدة في `types/index.ts`:
   - `GuardianWithOrphans`
   - `OrphanDetails`
3. إعادة كتابة كاملة لصفحة `/orphans` لدعم الطريقتين
4. تصميم responsive وعملي

## كيفية الاستخدام

1. انتقل إلى صفحة "بيانات الأيتام"
2. اختر طريقة العرض من التبويبات في الأعلى:
   - "عرض حسب اليتيم": للعرض التقليدي
   - "عرض حسب الوصي": للعرض الجديد المجمع
3. في وضع الأوصياء:
   - اضغط على أي بطاقة وصي لتوسيعها
   - ستظهر معلومات الوصي وجدول الأيتام المرتبطين به
   - يمكنك البحث عن وصي معين أو فلترة النتائج

## ملاحظات
- التصميم responsive ويعمل على جميع الأحجام
- الألوان مصنفة حسب النوع لسهولة التمييز
- البيانات محمية ويتطلب تسجيل الدخول للوصول إليها

